<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>webtrackR • webtrackR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="webtrackR">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">webtrackR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/webtrackR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gesistsa/webtrackR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>webtrackR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gesistsa/webtrackR/blob/main/vignettes/webtrackR.Rmd" class="external-link"><code>vignettes/webtrackR.Rmd</code></a></small>
      <div class="d-none name"><code>webtrackR.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gesistsa/webtrackR" class="external-link">webtrackR</a></span><span class="op">)</span></span></code></pre></div>
<p>webtrackR is an R package to preprocess and analyze web tracking
data, i.e., web browsing histories of participants in an academic study.
Web tracking data is oftentimes collected and analyzed in conjunction
with survey data of the same participants.</p>
<p><code>webtrackR</code> is part of a series of R packages to analyse
webtracking data:</p>
<ul>
<li>
<a href="https://github.com/schochastics/webtrackR" class="external-link">webtrackR</a>:
preprocess raw webtracking data</li>
<li>
<a href="https://github.com/schochastics/domainator" class="external-link">domainator</a>:
classify domains</li>
<li>
<a href="https://github.com/gesistsa/adaR" class="external-link">adaR</a>: parse urls</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of webtrackR from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"schochastics/webtrackR"</span><span class="op">)</span></span></code></pre></div>
<p>The <a href="https://CRAN.R-project.org/package=webtrackR" class="external-link">CRAN</a>
version can be installed with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"webtrackR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="s3-class-wt_dt">S3 class <code>wt_dt</code><a class="anchor" aria-label="anchor" href="#s3-class-wt_dt"></a>
</h2>
<p>The package defines an S3 class called <code>wt_dt</code> which
inherits most of the functionality from the <code>data.frame</code>
class. A <code>summary</code> and <code>print</code> method are included
in the package.</p>
<p>Each row in a web tracking data set represents a visit. Raw data need
to have at least the following variables:</p>
<ul>
<li>
<code>panelist_id</code>: the individual from which the data was
collected</li>
<li>
<code>url</code>: the URL of the visit</li>
<li>
<code>timestamp</code>: the time of the URL visit</li>
</ul>
<p>The function <code>as.wt_dt</code> assigns the class
<code>wt_dt</code> to a raw web tracking data set. It also allows you to
specify the name of the raw variables corresponding to
<code>panelist_id</code>, <code>url</code> and <code>timestamp</code>.
Additionally, it turns the timestamp variable into <code>POSIXct</code>
format.</p>
<p>All preprocessing functions check if these three variables are
present. Otherwise an error is thrown.</p>
</div>
<div class="section level2">
<h2 id="preprocessing">Preprocessing<a class="anchor" aria-label="anchor" href="#preprocessing"></a>
</h2>
<p>Several other variables can be derived from the raw data with the
following functions:</p>
<ul>
<li>
<code><a href="../reference/add_duration.html">add_duration()</a></code> adds a variable called
<code>duration</code> based on the sequence of timestamps. The basic
logic is that the duration of a visit is set to the time difference to
the subsequent visit, unless this difference exceeds a certain value
(defined by argument <code>cutoff</code>), in which case the duration
will be replaced by <code>NA</code> or some user-defined value (defined
by <code>replace_by</code>).</li>
<li>
<code><a href="../reference/add_session.html">add_session()</a></code> adds a variable called
<code>session</code>, which groups subsequent visits into a session
until the difference to the next visit exceeds a certain value (defined
by <code>cutoff</code>).</li>
<li>
<code><a href="../reference/extract_host.html">extract_host()</a></code>, <code><a href="../reference/extract_domain.html">extract_domain()</a></code>,
<code><a href="../reference/extract_path.html">extract_path()</a></code> extracts the host, domain and path of the
raw URL and adds variables named accordingly. See function descriptions
for definitions of these terms. <code><a href="../reference/drop_query.html">drop_query()</a></code> lets you drop
the query and fragment components of the raw URL.</li>
<li>
<code><a href="../reference/add_next_visit.html">add_next_visit()</a></code> and <code><a href="../reference/add_previous_visit.html">add_previous_visit()</a></code>
adds the previous or the next URL, domain, or host (defined by
<code>level</code>) as a new variable.</li>
<li>
<code><a href="../reference/add_referral.html">add_referral()</a></code> adds a new variable indicating whether a
visit was referred by a social media platform. Follows the logic of
Schmidt et al., <a href="https://doi.org/10.31235/osf.io/cks68" class="external-link">(2023)</a>.</li>
<li>
<code><a href="../reference/add_title.html">add_title()</a></code> downloads the title of a website (the text
within the <code>&lt;title&gt;</code> tag of a web site’s
<code>&lt;head&gt;</code>) and adds it as a new variable.</li>
<li>
<code><a href="../reference/add_panelist_data.html">add_panelist_data()</a></code>. Joins a data set containing
information about participants such as a survey.</li>
</ul>
</div>
<div class="section level2">
<h2 id="classification">Classification<a class="anchor" aria-label="anchor" href="#classification"></a>
</h2>
<ul>
<li>
<code><a href="../reference/classify_visits.html">classify_visits()</a></code> categorizes website visits by either
extracting the URL’s domain or host and matching them to a list of
domains or hosts, or by matching a list of regular expressions against
the visit URL.</li>
</ul>
</div>
<div class="section level2">
<h2 id="summarizing-and-aggregating">Summarizing and aggregating<a class="anchor" aria-label="anchor" href="#summarizing-and-aggregating"></a>
</h2>
<ul>
<li>
<code><a href="../reference/deduplicate.html">deduplicate()</a></code> flags or drops (as defined by argument
<code>method</code>) consecutive visits to the same URL within a
user-defined time frame (as set by argument <code>within</code>).
Alternatively to dropping or flagging visits, the function aggregates
the durations of such duplicate visits.</li>
<li>
<code><a href="../reference/sum_visits.html">sum_visits()</a></code> and <code><a href="../reference/sum_durations.html">sum_durations()</a></code> aggregate
the number or the durations of visits, by participant and by a time
period (as set by argument <code>timeframe</code>). Optionally, the
function aggregates the number / duration of visits to a certain class
of visits.</li>
<li>
<code><a href="../reference/sum_activity.html">sum_activity()</a></code> counts the number of active time periods
(defined by <code>timeframe</code>) by participant.</li>
</ul>
</div>
<div class="section level2">
<h2 id="example-code">Example code<a class="anchor" aria-label="anchor" href="#example-code"></a>
</h2>
<p>A typical workflow including preprocessing, classifying and
aggregating web tracking data looks like this (using the in-built
example data):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/gesistsa/webtrackR" class="external-link">webtrackR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load example data and turn it into wt_dt</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"testdt_tracking"</span><span class="op">)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wt_dt.html">as.wt_dt</a></span><span class="op">(</span><span class="va">testdt_tracking</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add duration</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_duration.html">add_duration</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract domains</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/extract_domain.html">extract_domain</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># drop duplicates (consecutive visits to the same URL within one second)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/deduplicate.html">deduplicate</a></span><span class="op">(</span><span class="va">wt</span>, within <span class="op">=</span> <span class="fl">1</span>, method <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load example domain classification and classify domains</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"domain_list"</span><span class="op">)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/classify_visits.html">classify_visits</a></span><span class="op">(</span><span class="va">wt</span>, classes <span class="op">=</span> <span class="va">domain_list</span>, match_by <span class="op">=</span> <span class="st">"domain"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load example survey data and join with web tracking data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"testdt_survey_w"</span><span class="op">)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_panelist_data.html">add_panelist_data</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">testdt_survey_w</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># aggregate number of visits by day and panelist, and by domain class</span></span>
<span><span class="va">wt_summ</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sum_visits.html">sum_visits</a></span><span class="op">(</span><span class="va">wt</span>, timeframe <span class="op">=</span> <span class="st">"date"</span>, visit_class <span class="op">=</span> <span class="st">"type"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Schoch, Bernhard Clemm von Hohenberg, Frank Mangold, Sebastian Stier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
