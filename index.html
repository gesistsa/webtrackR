<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Data structures and methods to work with web tracking data. The functions cover data preprocessing steps, enriching web tracking data with external information and methods for the analysis of digital behavior as used in several academic papers (e.g., Clemm von Hohenberg et al., 2023 &lt;doi:10.17605/OSF.IO/M3U9P&gt;; Stier et al., 2022 &lt;doi:10.1017/S0003055421001222&gt;).">
<title>Preprocessing and Analyzing Web Tracking Data • webtrackR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Preprocessing and Analyzing Web Tracking Data">
<meta property="og:description" content="Data structures and methods to work with web tracking data. The functions cover data preprocessing steps, enriching web tracking data with external information and methods for the analysis of digital behavior as used in several academic papers (e.g., Clemm von Hohenberg et al., 2023 &lt;doi:10.17605/OSF.IO/M3U9P&gt;; Stier et al., 2022 &lt;doi:10.1017/S0003055421001222&gt;).">
<meta property="og:image" content="https://schochastics.github.io/webtrackR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">webtrackR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/webtrackR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/schochastics/webtrackR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="webtrackr-">webtrackR <a class="anchor" aria-label="anchor" href="#webtrackr-"></a>
</h1>
</div>
<!-- badges: start -->

<p>webtrackR is an R package to preprocess and analyze web tracking data, i.e., web browsing histories of participants in an academic study. Web tracking data is oftentimes collected and analyzed in conjunction with survey data of the same participants.</p>
<p><code>webtrackR</code> is part of a series of R packages to analyse webtracking data:</p>
<ul>
<li>
<a href="https://github.com/schochastics/webtrackR" class="external-link">webtrackR</a>: preprocess raw webtracking data</li>
<li>
<a href="https://github.com/schochastics/domainator" class="external-link">domainator</a>: classify domains</li>
<li>
<a href="https://github.com/gesistsa/adaR" class="external-link">adaR</a>: parse urls</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of webtrackR from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"schochastics/webtrackR"</span><span class="op">)</span></span></code></pre></div>
<p>The <a href="https://CRAN.R-project.org/package=webtrackR" class="external-link">CRAN</a> version can be installed with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"webtrackR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="s3-class-wt_dt">S3 class <code>wt_dt</code>
<a class="anchor" aria-label="anchor" href="#s3-class-wt_dt"></a>
</h2>
<p>The package defines an S3 class called <code>wt_dt</code> which inherits most of the functionality from the <code>data.frame</code> class. A <code>summary</code> and <code>print</code> method are included in the package.</p>
<p>Each row in a web tracking data set represents a visit. Raw data need to have at least the following variables:</p>
<ul>
<li>
<code>panelist_id</code>: the individual from which the data was collected</li>
<li>
<code>url</code>: the URL of the visit</li>
<li>
<code>timestamp</code>: the time of the URL visit</li>
</ul>
<p>The function <code>as.wt_dt</code> assigns the class <code>wt_dt</code> to a raw web tracking data set. It also allows you to specify the name of the raw variables corresponding to <code>panelist_id</code>, <code>url</code> and <code>timestamp</code>. Additionally, it turns the timestamp variable into <code>POSIXct</code> format.</p>
<p>All preprocessing functions check if these three variables are present. Otherwise an error is thrown.</p>
</div>
<div class="section level2">
<h2 id="preprocessing">Preprocessing<a class="anchor" aria-label="anchor" href="#preprocessing"></a>
</h2>
<p>Several other variables can be derived from the raw data with the following functions:</p>
<ul>
<li>
<code><a href="reference/add_duration.html">add_duration()</a></code> adds a variable called <code>duration</code> based on the sequence of timestamps. The basic logic is that the duration of a visit is set to the time difference to the subsequent visit, unless this difference exceeds a certain value (defined by argument <code>cutoff</code>), in which case the duration will be replaced by <code>NA</code> or some user-defined value (defined by <code>replace_by</code>).</li>
<li>
<code><a href="reference/add_session.html">add_session()</a></code> adds a variable called <code>session</code>, which groups subsequent visits into a session until the difference to the next visit exceeds a certain value (defined by <code>cutoff</code>).</li>
<li>
<code><a href="reference/extract_host.html">extract_host()</a></code>, <code><a href="reference/extract_domain.html">extract_domain()</a></code>, <code><a href="reference/extract_path.html">extract_path()</a></code> extracts the host, domain and path of the raw URL and adds variables named accordingly. See function descriptions for definitions of these terms. <code><a href="reference/drop_query.html">drop_query()</a></code> lets you drop the query and fragment components of the raw URL.</li>
<li>
<code><a href="reference/add_next_visit.html">add_next_visit()</a></code> and <code><a href="reference/add_previous_visit.html">add_previous_visit()</a></code> adds the previous or the next URL, domain, or host (defined by <code>level</code>) as a new variable.</li>
<li>
<code><a href="reference/add_referral.html">add_referral()</a></code> adds a new variable indicating whether a visit was referred by a social media platform. Follows the logic of Schmidt et al., <a href="https://doi.org/10.31235/osf.io/cks68" class="external-link">(2023)</a>.</li>
<li>
<code><a href="reference/add_title.html">add_title()</a></code> downloads the title of a website (the text within the <code>&lt;title&gt;</code> tag of a web site’s <code>&lt;head&gt;</code>) and adds it as a new variable.</li>
<li>
<code><a href="reference/add_panelist_data.html">add_panelist_data()</a></code>. Joins a data set containing information about participants such as a survey.</li>
</ul>
</div>
<div class="section level2">
<h2 id="classification">Classification<a class="anchor" aria-label="anchor" href="#classification"></a>
</h2>
<ul>
<li>
<code><a href="reference/classify_visits.html">classify_visits()</a></code> categorizes website visits by either extracting the URL’s domain or host and matching them to a list of domains or hosts, or by matching a list of regular expressions against the visit URL.</li>
</ul>
</div>
<div class="section level2">
<h2 id="summarizing-and-aggregating">Summarizing and aggregating<a class="anchor" aria-label="anchor" href="#summarizing-and-aggregating"></a>
</h2>
<ul>
<li>
<code><a href="reference/deduplicate.html">deduplicate()</a></code> flags or drops (as defined by argument <code>method</code>) consecutive visits to the same URL within a user-defined time frame (as set by argument <code>within</code>). Alternatively to dropping or flagging visits, the function aggregates the durations of such duplicate visits.</li>
<li>
<code><a href="reference/sum_visits.html">sum_visits()</a></code> and <code><a href="reference/sum_durations.html">sum_durations()</a></code> aggregate the number or the durations of visits, by participant and by a time period (as set by argument <code>timeframe</code>). Optionally, the function aggregates the number / duration of visits to a certain class of visits.</li>
<li>
<code><a href="reference/sum_activity.html">sum_activity()</a></code> counts the number of active time periods (defined by <code>timeframe</code>) by participant.</li>
</ul>
</div>
<div class="section level2">
<h2 id="example-code">Example code<a class="anchor" aria-label="anchor" href="#example-code"></a>
</h2>
<p>A typical workflow including preprocessing, classifying and aggregating web tracking data looks like this (using the in-built example data):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/schochastics/webtrackR" class="external-link">webtrackR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load example data and turn it into wt_dt</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"testdt_tracking"</span><span class="op">)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wt_dt.html">as.wt_dt</a></span><span class="op">(</span><span class="va">testdt_tracking</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add duration</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_duration.html">add_duration</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># extract domains</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/extract_domain.html">extract_domain</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># drop duplicates (consecutive visits to the same URL within one second)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/deduplicate.html">deduplicate</a></span><span class="op">(</span><span class="va">wt</span>, within <span class="op">=</span> <span class="fl">1</span>, method <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load example domain classification and classify domains</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"domain_list"</span><span class="op">)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/classify_visits.html">classify_visits</a></span><span class="op">(</span><span class="va">wt</span>, classes <span class="op">=</span> <span class="va">domain_list</span>, match_by <span class="op">=</span> <span class="st">"domain"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load example survey data and join with web tracking data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"testdt_survey_w"</span><span class="op">)</span></span>
<span><span class="va">wt</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/add_panelist_data.html">add_panelist_data</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">testdt_survey_w</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># aggregate number of visits by day and panelist, and by domain class</span></span>
<span><span class="va">wt_summ</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/sum_visits.html">sum_visits</a></span><span class="op">(</span><span class="va">wt</span>, timeframe <span class="op">=</span> <span class="st">"date"</span>, visit_class <span class="op">=</span> <span class="st">"type"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=webtrackR" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/schochastics/webtrackR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/schochastics/webtrackR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing webtrackR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David Schoch <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-2952-4812" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Bernhard Clemm von Hohenberg <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-6976-9745" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Frank Mangold <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9776-3113" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Sebastian Stier <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-1217-5778" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=webtrackR" class="external-link"><img src="https://www.r-pkg.org/badges/version/webtrackR" alt="CRAN status"></a></li>
<li><a href="https://CRAN.R-project.org/package=webtrackR" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/webtrackR" alt="CRAN Downloads"></a></li>
<li><a href="https://github.com/schochastics/webtrackR/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/schochastics/webtrackR/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/schochastics/webtrackR?branch=main" class="external-link"><img src="https://codecov.io/gh/schochastics/webtrackR/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Schoch, Bernhard Clemm von Hohenberg, Frank Mangold, Sebastian Stier.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
